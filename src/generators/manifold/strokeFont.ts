/**
 * Stroke-based font for Manifold
 * Each character is defined as a series of path segments
 * Coordinates are in a 4x6 unit grid (width x height)
 */

// Path type: array of [x, y] points
export type StrokePath = [number, number][]

// Character definition: array of paths
export type CharacterPaths = StrokePath[]

/**
 * Stroke font character definitions
 * Each character is defined on a 4x6 grid (width x height)
 * s = size/6 (unit scale factor)
 */
export const STROKE_FONT: Record<string, CharacterPaths> = {
  'A': [
    [[0, 0], [2, 6], [4, 0]],
    [[0.8, 2], [3.2, 2]]
  ],
  'B': [
    [[0, 0], [0, 6], [3, 6], [4, 5], [3, 3], [0, 3]],
    [[3, 3], [4, 2], [4, 1], [3, 0], [0, 0]]
  ],
  'C': [
    [[4, 5], [3, 6], [1, 6], [0, 5], [0, 1], [1, 0], [3, 0], [4, 1]]
  ],
  'D': [
    [[0, 0], [0, 6], [2, 6], [4, 4], [4, 2], [2, 0], [0, 0]]
  ],
  'E': [
    [[4, 6], [0, 6], [0, 0], [4, 0]],
    [[0, 3], [3, 3]]
  ],
  'F': [
    [[4, 6], [0, 6], [0, 0]],
    [[0, 3], [3, 3]]
  ],
  'G': [
    [[4, 5], [3, 6], [1, 6], [0, 5], [0, 1], [1, 0], [3, 0], [4, 1], [4, 3], [2, 3]]
  ],
  'H': [
    [[0, 0], [0, 6]],
    [[4, 0], [4, 6]],
    [[0, 3], [4, 3]]
  ],
  'I': [
    [[1, 0], [3, 0]],
    [[1, 6], [3, 6]],
    [[2, 0], [2, 6]]
  ],
  'J': [
    [[1, 6], [3, 6]],
    [[2, 6], [2, 1], [1, 0], [0, 1]]
  ],
  'K': [
    [[0, 0], [0, 6]],
    [[4, 6], [0, 3], [4, 0]]
  ],
  'L': [
    [[0, 6], [0, 0], [4, 0]]
  ],
  'M': [
    [[0, 0], [0, 6], [2, 3], [4, 6], [4, 0]]
  ],
  'N': [
    [[0, 0], [0, 6], [4, 0], [4, 6]]
  ],
  'O': [
    [[1, 0], [3, 0], [4, 1], [4, 5], [3, 6], [1, 6], [0, 5], [0, 1], [1, 0]]
  ],
  'P': [
    [[0, 0], [0, 6], [3, 6], [4, 5], [4, 4], [3, 3], [0, 3]]
  ],
  'Q': [
    [[1, 0], [3, 0], [4, 1], [4, 5], [3, 6], [1, 6], [0, 5], [0, 1], [1, 0]],
    [[2.5, 1.5], [4, 0]]
  ],
  'R': [
    [[0, 0], [0, 6], [3, 6], [4, 5], [4, 4], [3, 3], [0, 3]],
    [[2, 3], [4, 0]]
  ],
  'S': [
    [[4, 5], [3, 6], [1, 6], [0, 5], [0, 4], [1, 3], [3, 3], [4, 2], [4, 1], [3, 0], [1, 0], [0, 1]]
  ],
  'T': [
    [[0, 6], [4, 6]],
    [[2, 6], [2, 0]]
  ],
  'U': [
    [[0, 6], [0, 1], [1, 0], [3, 0], [4, 1], [4, 6]]
  ],
  'V': [
    [[0, 6], [2, 0], [4, 6]]
  ],
  'W': [
    [[0, 6], [1, 0], [2, 3], [3, 0], [4, 6]]
  ],
  'X': [
    [[0, 0], [4, 6]],
    [[0, 6], [4, 0]]
  ],
  'Y': [
    [[0, 6], [2, 3], [4, 6]],
    [[2, 3], [2, 0]]
  ],
  'Z': [
    [[0, 6], [4, 6], [0, 0], [4, 0]]
  ],
  '0': [
    [[1, 0], [3, 0], [4, 1], [4, 5], [3, 6], [1, 6], [0, 5], [0, 1], [1, 0]]
  ],
  '1': [
    [[1, 5], [2, 6], [2, 0]],
    [[1, 0], [3, 0]]
  ],
  '2': [
    [[0, 5], [1, 6], [3, 6], [4, 5], [4, 4], [0, 0], [4, 0]]
  ],
  '3': [
    [[0, 5], [1, 6], [3, 6], [4, 5], [4, 4], [3, 3]],
    [[1.5, 3], [3, 3], [4, 2], [4, 1], [3, 0], [1, 0], [0, 1]]
  ],
  '4': [
    [[3, 0], [3, 6], [0, 2], [4, 2]]
  ],
  '5': [
    [[4, 6], [0, 6], [0, 3.5], [3, 3.5], [4, 2.5], [4, 1], [3, 0], [1, 0], [0, 1]]
  ],
  '6': [
    [[3, 6], [1, 6], [0, 5], [0, 1], [1, 0], [3, 0], [4, 1], [4, 2.5], [3, 3.5], [0, 3.5]]
  ],
  '7': [
    [[0, 6], [4, 6], [1.5, 0]]
  ],
  '8': [
    [[1, 3], [0, 4], [0, 5], [1, 6], [3, 6], [4, 5], [4, 4], [3, 3], [1, 3], [0, 2], [0, 1], [1, 0], [3, 0], [4, 1], [4, 2], [3, 3]]
  ],
  '9': [
    [[1, 0], [3, 0], [4, 1], [4, 5], [3, 6], [1, 6], [0, 5], [0, 3.5], [1, 2.5], [4, 2.5]]
  ],
  ' ': [],
  '!': [
    [[2, 2.5], [2, 6]]
    // Dot will be handled specially
  ],
  '.': [],  // Just a dot, handled specially
  '-': [
    [[0.5, 3], [3.5, 3]]
  ]
}

// Characters that have dots
export const DOTTED_CHARS = ['!', '.']

/**
 * Get default character spacing factor
 */
export function getCharSpacing(): number {
  return 0.7  // Matches the SCAD implementation
}
